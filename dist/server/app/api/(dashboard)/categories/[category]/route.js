(()=>{var e={};e.id=237,e.ids=[237],e.modules={6037:e=>{"use strict";e.exports=require("mongoose")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},7346:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>x,routeModule:()=>l,serverHooks:()=>w,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>f});var r={};s.r(r),s.d(r,{DELETE:()=>y,PATCH:()=>c});var n=s(2706),a=s(8203),i=s(5994),o=s(2545),d=s(2319),u=s(5392),g=s(9187),p=s(6037);let c=async(e,t)=>{let s=t.params.category;try{let{title:t}=await e.json(),{searchParams:r}=new URL(e.url),n=r.get("userId");if(!n||!p.Types.ObjectId.isValid(n))return new g.NextResponse(JSON.stringify({message:"Invalid or missing userId"}),{status:400});if(!s||!p.Types.ObjectId.isValid(s))return new g.NextResponse(JSON.stringify({message:"Invalid or missing categoryId"}),{status:400});if(await (0,o.A)(),!await d.A.findById(n))return new g.NextResponse(JSON.stringify({message:"User not found"}),{status:404});if(!await u.A.findOne({_id:s,user:n}))return new g.NextResponse(JSON.stringify({message:"Category not found"}),{status:404});let a=await u.A.findByIdAndUpdate(s,{title:t},{new:!0});return new g.NextResponse(JSON.stringify({message:"Category is updated",category:a}),{status:200})}catch(e){return new g.NextResponse("Error in updating category"+e.message,{status:500})}},y=async(e,t)=>{let s=t.params.category;try{let{searchParams:t}=new URL(e.url),r=t.get("userId");if(!r||!p.Types.ObjectId.isValid(r))return new g.NextResponse(JSON.stringify({message:"Invalid or missing userId"}),{status:400});if(!s||!p.Types.ObjectId.isValid(s))return new g.NextResponse(JSON.stringify({message:"Invalid or missing categoryId"}),{status:400});if(await (0,o.A)(),!await d.A.findById(r))return new g.NextResponse(JSON.stringify({message:"User not found"}),{status:404});if(!await u.A.findOne({_id:s,user:r}))return new g.NextResponse(JSON.stringify({message:"Category not found or does not belong to the user"}),{status:404});return await u.A.findByIdAndDelete(s),new g.NextResponse(JSON.stringify({message:"Category is deleted"}),{status:200})}catch(e){return new g.NextResponse("Error in deleting category"+e.message,{status:500})}},l=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/(dashboard)/categories/[category]/route",pathname:"/api/categories/[category]",filename:"route",bundlePath:"app/api/(dashboard)/categories/[category]/route"},resolvedPagePath:"C:\\Users\\MARK\\Desktop\\PROJECTS\\JAVASCRIPT\\blogs\\app\\api\\(dashboard)\\categories\\[category]\\route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:m,workUnitAsyncStorage:f,serverHooks:w}=l;function x(){return(0,i.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:f})}},6487:()=>{},8335:()=>{},2545:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(6037),n=s.n(r);let a=process.env.MONGODB_URI,i=async()=>{let e=n().connection.readyState;if(1===e){console.log("Already connected");return}if(2===e){console.log("Connecting...");return}try{n().connect(a,{dbName:"BLOGS",bufferCommands:!0}),console.log("Connected")}catch(e){throw console.log("Error: ",e),Error("Error: ",e)}}},5392:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(6037);let n=new r.Schema({title:{type:"string",required:!0},user:{type:r.Schema.Types.ObjectId,ref:"User"}},{timestamps:!0}),a=r.models.Category||(0,r.model)("Category",n)},2319:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(6037);let n=new r.Schema({email:{type:"string",required:!0,unique:!0},username:{type:"string",required:!0,unique:!0},password:{type:"string",required:!0}},{timestamps:!0}),a=r.models.User||(0,r.model)("User",n)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,452],()=>s(7346));module.exports=r})();